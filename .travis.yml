# R for travis: see documentation at https://docs.travis-ci.com/user/languages/r

before_install:
- pip3 install --user numpy scipy pandas
- if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install llvm &&
    export PATH="/usr/local/opt/llvm/bin:$PATH" &&
    export LDFLAGS="-L/usr/local/opt/llvm/lib" &&
    export CFLAGS="-I/usr/local/opt/llvm/include"; fi

install:
- Rscript travis_script.r

script:
- R CMD build .
- R CMD check *tar.gz --no-manual

after_success:
- echo $CODECOV_TOKEN
- Rscript -e 'library(covr);codecov(token="eb271df0-06bb-49bb-9b4a-2d250baf2328")'
- bash <(curl -s https://codecov.io/bash) -f "!*.lst"
